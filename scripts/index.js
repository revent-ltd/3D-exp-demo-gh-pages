"use strict";!function(){var o=window.Marzipano,t=window.data,r=window.boothsMap,d=new o.Viewer(document.getElementById("pano")),s=t.scenes.map(function(t){var e=o.ImageUrlSource.fromString(t.sourceImageLink),n=new o.EquirectGeometry([{width:1e3}]),i=o.RectilinearView.limit.traditional(1024,100*Math.PI/180),i=new o.RectilinearView(l(t.initialViewParameters),i),a=d.createScene({source:e,geometry:n,view:i,pinFirstLevel:!0});return t.hotspots.forEach(function(t){!function(t,e){if(!e.enabled||"navigation"==e.type)return;var n=p(e);t.hotspotContainer().createHotspot(n,l(e),function(t){return{perspective:{radius:t.radius,extraTransforms:t.extraTransforms}}}(e))}(a,t)}),{scene:a,data:t,view:i}}),n=s[0];function c(t){return t*(Math.PI/180)}function l(t){return{yaw:c(t.yaw),pitch:c(t.pitch)}}function u(t){var e=document.createElement("div");e.classList.add("hotspot"),e.classList.add("link-hotspot");var n=document.createElement("img");n.src="images/hotspot.png",n.classList.add("link-hotspot-icon");for(var i=["-ms-transform","-webkit-transform","transform"],a=0;a<i.length;a++){var o=i[a];n.style[o]="rotate("+c(t.rotation)+"rad)"}var r,d=function(t){for(var e=0;e<s.length;e++)if(s[e].data.id===t)return s[e];return null}(t.target);return null!=d&&(e.addEventListener("click",function(){m(d)}),(r=document.createElement("div")).classList.add("hotspot-tooltip"),r.classList.add("link-hotspot-tooltip"),r.innerHTML=d.data.name,e.appendChild(n),e.appendChild(r)),e}function p(t){var e,n,i,a=null;return"text-banner"==t.type?a=function(t){var e=document.createElement("div");e.classList.add("textInfo");var n="textInfo-"+Math.random().toString(36).substring(7);e.id=n;var i=document.createElement("div");i.classList.add("hotspot"),e.appendChild(i);var a=document.createElement("div");return a.classList.add("out"),(n=document.createElement("div")).classList.add("inTextInfo"),i.appendChild(a),a.appendChild(n),(a=document.createElement("div")).classList.add("tooltip-content"),e.appendChild(a),(n=document.createElement("p")).innerHTML=t.text,a.appendChild(n),e}(t):"youtube-video"==t.type?a=function(t){var e=document.createElement("div");e.style.transform="rotate("+t.rotation+"deg) skew("+t.skewX+"deg, "+t.skewY+"deg)";var n="youtube-"+Math.random().toString(36).substring(7);return e.classList.add("youtube"),e.id=n,(n=document.createElement("iframe")).id="youtube",n.setAttribute("width",t.width),n.setAttribute("height",t.height),n.setAttribute("src","https://www.youtube.com/embed/"+t.videoId+"?rel=0&amp;controls=0&amp;showinfo=0&amp;"),n.setAttribute("frameborder",0),n.setAttribute("allowfullscreen",1),e.appendChild(n),e}(t):"link"==t.type?a=function(t){var e=document.createElement("div");e.classList.add("textInfo");var n="linkBanner-"+Math.random().toString(36).substring(7);e.id=n;var i=document.createElement("div");i.classList.add("hotspot"),e.appendChild(i);var a=document.createElement("div");return a.classList.add("out"),(n=document.createElement("div")).classList.add("inLinkBanner"),i.appendChild(a),a.appendChild(n),(a=document.createElement("div")).classList.add("tooltip-content"),e.appendChild(a),(n=document.createElement("p")).innerHTML=t.text,a.appendChild(n),e.addEventListener("click",function(){window.open(t.url,"_blank").focus()}),e}(t):"image"==t.type?(e=t,n=document.createElement("div"),i="image-"+Math.random().toString(36).substring(7),n.id=i,(i=document.createElement("img")).setAttribute("width",e.width),i.setAttribute("height",e.height),i.setAttribute("src",e.url),n.appendChild(i),a=n):"navigation"==t.type?a=u(t):"group"==t.type?(a=document.createElement("div"),t.hotspots.forEach(function(t){var e=p(t);e.style.position="absolute",e.style.marginLeft=t.offsetX+"px",e.style.marginTop=t.offsetY+"px",a.appendChild(e)})):"booth"==t.type?(a=document.createElement("div"),(1e3<=t.radius?r[t.booth].hotspotsMin:r[t.booth].hotspotsFull).forEach(function(t){var e=p(t);e.style.position="absolute",e.style.marginLeft=t.offsetX+"px",e.style.marginTop=t.offsetY+"px",a.appendChild(e)})):"image-logo"==t.type&&(a=function(t){var e=document.createElement("div");e.classList.add("expand");var n="image-"+Math.random().toString(36).substring(7);e.id=n,(n=document.createElement("img")).setAttribute("width",t.width),n.setAttribute("height",t.height),n.setAttribute("src",t.url),e.appendChild(n);var i=document.getElementById("globalTextWindow");i||((i=document.createElement("div")).id="globalTextWindow",i.classList.add("expand-text-window"),i.style.visibility="hidden",(a=document.createElement("p")).id="globalTextWindowText",a.classList.add("expand-text"),i.appendChild(a),document.body.appendChild(i));var a=document.getElementById("globalTextWindowText");return e.onmouseover=function(){return i.style.visibility="visible",a.innerHTML=t.text,!1},e.onmouseout=function(){return i.style.visibility="hidden",a.innerHTML="",!1},e}(t)),a}function m(t){var e={yaw:n.view.yaw(),pitch:n.view.pitch(),fov:n.view.fov()};t.view.setParameters(e),(n=t).scene.switchTo()}s.forEach(function(n){n.data.hotspots.forEach(function(t){var e;"navigation"==t.type&&t.enabled&&(e=p(t),n.scene.hotspotContainer().createHotspot(e,l(t)))})}),m(n)}();